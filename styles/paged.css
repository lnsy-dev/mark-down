/* Paged rendering styles for <mark-down> */

:root {
  --page-width: 148mm;    /* A5 portrait width */
  --page-height: 210mm;   /* A5 portrait height */
  --page-margin: 15mm;    /* inner margin for header/footer spacing */
  --page-header-height: 12mm;
  --page-footer-height: 12mm;
}

/* Enable paged layout styles only when paged-rendering is true */
mark-down[paged-rendering="true"] {
  padding-right: 0;
  max-width: none;
}

mark-down[paged-rendering] .page-body:first-child {
  text-align: center;
}

mark-down[paged-rendering] .page-body {
  display: flex;
  flex-direction: column;
  justify-content: center;
}

/* Allow setting page size via attribute; currently only A5 portrait is implemented */
mark-down[paged-rendering="true"][page-size="a5"] {
  --page-width: 148mm;
  --page-height: 210mm;
}

mark-down .md-paged {
  position: relative;
  margin: 1rem auto;
}

mark-down .pages {
  position: relative;
}

mark-down .page {
  position: relative;
  background: white;
  color: var(--fg-color);
  width: var(--page-width);
  height: var(--page-height);
  margin: 0 auto;
  box-shadow: 0 2px 20px rgba(0,0,0,0.15);
  overflow: hidden;
}

/* Header/Footer */
mark-down .page-header {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: var(--page-header-height);
  padding: 0 12mm;
  display: flex;
  align-items: flex-end;
  font-size: 10pt;
  color: var(--neutral-fg-color);
}
mark-down .page.odd .page-header { justify-content: flex-end; text-align: right; }
mark-down .page.even .page-header { justify-content: flex-start; text-align: left; }

mark-down .page-footer {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: var(--page-footer-height);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 10pt;
  color: var(--neutral-fg-color);
}

/* Body takes remaining space */
mark-down .page-body {
  position: absolute;
  top: calc(var(--page-header-height) + 6mm);
  bottom: calc(var(--page-footer-height) + 6mm);
  left: 12mm;
  right: 12mm;
  overflow: hidden;
}

/* Navigation arrows (screen only) */
@media screen {
  mark-down .page { display: none; }
  mark-down .page.active { display: block; }

  mark-down .page-prev,
  mark-down .page-next {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background: var(--neutral-bg-color);
    color: var(--fg-color);
    border: 1px solid var(--neutral-fg-color);
    border-radius: 4px;
    width: 2.2rem;
    height: 2.2rem;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    opacity: 0.9;
    transition: opacity 0.2s;
  }

  mark-down .page-prev:hover,
  mark-down .page-next:hover { opacity: 1; }

  mark-down .page-prev { left: -3rem; }
  mark-down .page-next { right: -3rem; }
}

/* Print styles: A5 portrait page size and page breaks */
@media print {
  @page { size: A5 portrait; margin: 12mm; }

  mark-down {
    margin: 0 !important;
    padding: 0 !important;
  }

  mark-down .page {
    display: block !important;
    box-shadow: none !important;
    width: var(--page-width);
    height: var(--page-height);
    position: relative;
    break-after: page;
    page-break-after: always; /* for older engines */
  }

  /* Ensure content is visible in print */
  mark-down .page-body { overflow: visible; }

  mark-down .page-prev,
  mark-down .page-next { display: none !important; }
}
